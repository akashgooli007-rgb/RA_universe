<!-- ONLY SCRIPT SECTION UPDATED BELOW -->

<script>

/* music volume */
document.getElementById("music").volume = 0.4;


/* ===== TYPEWRITER RESTORED ===== */
const text="Akash ‚ù§Ô∏è Ramya";
let idx=0;

(function type(){
  if(idx<text.length){
    document.getElementById("type").innerHTML+=text[idx++];
    setTimeout(type,80);
  }
})();


/* COUNTDOWN */
const d=new Date("April 6, 2026 10:34:00").getTime();
setInterval(()=>{
 let diff=d-new Date().getTime();
 let day=Math.floor(diff/(1000*60*60*24));
 let hr=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
 let min=Math.floor((diff%(1000*60*60))/(1000*60));
 countdown.innerHTML=day+"d "+hr+"h "+min+"m left";
},1000);


/* PETALS */
for(let i=0;i<6;i++){
 let p=document.createElement("div");
 p.className="petal";
 p.innerHTML="üå∏";
 p.style.left=Math.random()*100+"vw";
 p.style.animationDuration=(4+Math.random()*5)+"s";
 document.body.appendChild(p);
}


/* MUSIC */
function toggleMusic(){
 let m=document.getElementById("music");
 m.paused?m.play():m.pause();
}


/* LIGHTBOX */
function openImg(img){
 lightbox.style.display="flex";
 lightimg.src=img.src;
}


/* ===== IMPROVED WISH SUBMIT ===== */
function sendWish(){

 const btn=document.getElementById("sendBtn");
 const success=document.getElementById("success");

 const guestName=document.getElementById("name").value;
 const guestMsg=document.getElementById("msg").value;

 if(!guestName||!guestMsg) return;

 btn.disabled=true;
 btn.innerHTML='Sending <span class="spinner"></span>';

 fetch("https://script.google.com/macros/s/AKfycbzURaVfH396TSs9OD2yi5eiIJaxqGjwtMNt362PaDoCvxrdXe2AhrVybiiPz9VJx8Q9/exec",{
   method:"POST",
   body:JSON.stringify({name:guestName,message:guestMsg})
 }).then(()=>{

   document.getElementById("name").value="";
   document.getElementById("msg").value="";

   success.style.display="block";
   setTimeout(()=>success.style.display="none",3000);

   btn.disabled=false;
   btn.innerHTML="Send Wish";
 });

}

</script>
